VPN 本质上就是虚拟了一个路由器。正常的硬件路由器，比如你是 1.1.1.2，别人是1.1.1.3，你就知道，你俩是同一个内网的。网关一般是 1.1.1.1。你俩的网络交流就是通过这个网关进行。


vpn 虚拟了这个路由器之后，给你分配了 1.1.1.2，你看到对方是 1.1.1.3，一样的网关也是1.1.1.1.但是这个网关不是真的路由器。而是 VPN 模拟出来的假的。

vpn 在底下，通过真实的 IP 进行通信，比如自己是 102.1.1.1，对方是134.2.2.1，实际通讯还是通过这个。收到 134.2.2.1来的数据，把 IP 改为 1.1.1.3，对方 134.2.2.1收到你的数据之后，把102.1.1.1 改为 1.1.1.2。双方的应用程序都以为在同一个内网。 


所以 VPN 在配置的时候。可以有2种方法。一种是点对点的。比如 你只知道对方的 IP。那么这个 VPN 内网里面，就只有你俩。还有一种是有一个真实的机器做路由，也就是所谓的 vpn 服务器。他的任务就是修改 IP。

比如你作为 1.1.1.2，发出数据，从102.1.1.1这个真实 IP 走，服务器收到之后，看到 102.1.1.1，就知道你是本 VPN 中的 1.1.1.2，然后你发送的目的是 1.1.1.3，他也有一个表，查到对方真实的是 134.2.2.1. 告诉对方，这个数据是从 1.1.1.2来的。


有中间服务器的好处就是，他知道你们各方的真实的信息。你们对其他人只有内网的信息。所以就达成了保密的目的。比如你发送的目的地是 1.1.1.3，这是个内网地址，别人是不知道实际在哪的。而且，如果对方把真实的地址变了，然后通知服务器。你也不知道他是什么时候变得。就达到保护隐私的目的。


一般一个公司，或者一个医院，会做一个 VPN 的服务。


你在内网访问的时候以为大家都在同一个路由器下面，实际是分散在各地的。


而且他什么时候换了你也不知道。


但是服务器的配置里面，所有的信息都有。
